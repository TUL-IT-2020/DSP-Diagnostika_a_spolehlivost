<HTML>
<HEAD>
<TITLE></TITLE>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1250"> 
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#800080">
<P><A name="2.4 Boundary Scan"></A><B> <FONT size=+1>Boundary Scan - Zápis 
do rozhraní</FONT></B> 
<P align="justify">Boundary Scan je vnitøní nadstavba VLSI 
èíslicovıch obvodù umoòující snadnı diagnostickı pøístup k jednotlivım vıvodùm 
pouzder obvodù na osazenıch deskách programovatelnımi prostøedky. Metoda 
Boundary Scan (lze pøeloit jako zápis do rozhraní, èi hranièní test) je 
jak po stránce vnitøní obvodové skladby, tak po stránce sériového protokolu pro 
pøenos dat pomocí øadièe TAP (Test Acces Port) mezinárodnì standardizována pod 
oznaèením IEEE 1149.1. Uvedenı standard není pouitelnı pro testování 
analogovıch obvodù a pasivních souèástek. Dùvodem vypracování metodiky Boundary 
Scan bylo to, zatímní diagnostické metody na úrovni desky plošnıch 
spojù øešily pøedevším problém funkènosti 
integrovanıch obvodù, jimi byla deska osazena. Otázka plošnıch spojù, které 
propojují jednotlivé integrované obvody, která je rovnì z hlediska funkènosti 
celé desky neménì dùleitá, zatím stála stranou.</FONT> 
<P  align="justify">Základní myšlenka metody Boundary Scan spoèívá 
ve vloení posuvného registru mezi funkèní bloky integrovaného obvodu a jeho 
vıvody. Tento základní stavební prvek budeme nazıvat Boundary Scan “buòkou”. Její struktura je na Obr.1.</FONT> 
<CENTER><IMG height=162 hspace=9 src="image24.gif" 
width=583></CENTER>
<CENTER><I>Obr. 1 Uspoøádání Boundary Scan 
buòky</FONT></I></CENTER>
<CENTER><I>&nbsp;</I></CENTER>
<P>V závislosti na øídícím signálu vstupního 
multiplexoru MX1 provádí buòka dvì funkce:</FONT> 
<OL type=a>
  <LI>vloení vstupních dat do klopného obvodu 
  (posuvného registru)</FONT> 
  <LI>pøenos obsahu klopného obvodu (posuvného 
  registru) na vıstup</FONT> </LI></OL>Tento prvek je 
natolik univerzální, e mùe bıt pouit na vstupním i vıstupním vıvodu 
integrovaného obvodu .</FONT> 
<P  align="justify">V reimu F (funkce) prochází signál ze 
signálového vstupu na signálovı vıstup (tzn. vıstup funkèní logiky se pøenáší na 
vıstup integrovaného obvodu). Navíc je mono logickou hodnotu na signálovém 
vıstupu vloit do klopného obvodu. To je velice dùleitá vlastnost, protoe 
umoòuje v urèitém charakteristickém okamiku získat “snímek” hodnoty na 
vıstupu. Tuto informaci lze vyuít pøi analıze pøechodnıch poruchovıch 
stavù.</FONT> 
<P  align="justify">V reimu T (testování ) se odpojí signálovı 
vstup od signálového vıstupu na MX1, èím se oddìlí primární kontakty pouzdra od 
vlastního strukturovaného logického jádra testovaného obvodu. Na signálovı 
vıstup je pøenášena informace z klopného obvodu, která reprezentuje testovací vektor. To znamená, e aplikaci 
testovacího vektoru musí pøedcházet jeho vloení do posuvného registru. Posuvnı 
registr se vytvoøí tak, e se jednotlivé Boundary Scan buòky propojí do série a 
vytvoøí registr oznaèovanı jako scanovací kanál. Propojení jednotlivıch bunìk do 
posuvného registru je provedeno pomocí signálù sériovı vstup a sériovı vıstup, 
které se navzájem u jednotlivıch bunìk propojí. Prùchodnost pøenosovıch cest je 
podmínìna generováním øídících signálù ovládajících multi</FONT>plexory MX1, 
MX2. 
<P> <BR><A name="2.4.1 Vyuití metody Boundary"></A><B><I><FONT size=+1>Vyuití metody Boundary Scan pøi 
testu desky</I></B></font> 
<P  align="justify">Jak bylo ji zmínìno v pøedcházejícím odstavci 
dají se pomocí Boundary Scan bunìk testovat nejen samotné integrované obvody, 
ale také propojení mezi nimi. Nutná podmínka samozøejmì je, e všechny logické 
obvody, které se nacházejí na desce, budou vybaveny Boundary Scan buòkami. V 
pøípadì bezchybné funkce spoje mezi dvìma integrovanımi obvody se obsah 
vıstupního registru pøedøazeného integrovaného obvodu musí shodovat s aktuálním 
stavem klopného obvodu v Boundary Scan buòce následujícího obvodu. Toto je 
základní metoda pro diagnostiku funkènosti propojení jednotlivıch prvkù. Pøímo 
na desce mùeme realizovat tyto diagnostické funkce .</FONT> 
<P> 
<UL>
  <LI>Vnìjší test </LI></UL>Pøi vnìjším testu jsou pøenosové cesty nastaveny tak, e 
je moné na spoje mezi integrovanımi obvody vkládat testovací vektory pomocí 
vnìjších propojek a odezvy ukládat do vstupních registrù. Prùchodnost 
pøenosovıch cest je vyznaèena tlustou èarou. (Obr.2) 
<CENTER>
<IMG   hspace=9 src="bound.gif">
<IMG height=151 hspace=9 src="image25.gif" 
width=554></CENTER>
<CENTER><I>Obr.2 Vnìjší test</I></CENTER>
<UL>
  <LI><I>Vnitøní</I> test </LI></UL>Tento reim 
umoòuje provést test vnitøní logiky všech integrovanıch obvodù Testovací 
vektory se vkládají do vstupních bunìk, odezvy do vıstupních bunìk. Toto je však 
velmi zjednodušenı pøípad, kterı pøedpokládá, e vnitøní logiku tvoøí pouze 
kombinaèní obvody. Pokud jsou souèástí vnitøní logiky i sekvenèní obvody budou 
se i ty podílet na aplikaci a vyhodnocení testu. Následující obrázek (Obr.3) 
schematicky znázoròuje øešení zapojení s vyznaèením prùchodnosti pøenosovıch 
cest.</P> 

<p align="CENTER"><IMG  height=135 hspace=9 src="image26.gif" 
width=539><BR><I> Obr.3 Vnitøní test</I></P>

<P align="justify">  
<UL START="3">
  <LI>Vzorkování </LI></UL>Toto je reim, kterı je 
vyuíván v reimu F (funkce). Umoòuje vloit do vstupního registru vzorek dat 
reprezentující informaci vkládanou na vstupy funkèní logiky a do vıstupního 
registru vzorek dat reprezentující odezvu na vstupní informaci. (Obr. 4)</FONT> 

<P> 
<CENTER><IMG height=135 hspace=9 src="image27.gif" 
width=539> <BR>
 <I>Obr.4 Vzorkování</I></CENTER>
<CENTER><I>&nbsp;</I></CENTER>
<P  align="justify">Spoleèenství vırobcù integrovanıch obvodù a 
jejich prodejcù oznaèované JTAG (Joint Test Actoin Group) usilují o dosaení 
dohody, která by stanovila princip konstrukce integrovanıch obvodù. Mezi 
nejznámìjší èleny tohoto spoleèenství jsou firmy Bull, DEC, Hewlwtt-Packard, 
Honeywell, NCR, Philips, Siemens, Texas Instrument, Alcatel, AT&amp;T. Cílem 
tohoto spoleèenství je, aby metodika testování desek byla pouitelná i v 
pøípadì, kdy jsou souèástí jedné desky vırobky od rùznıch firem. Souèasná verze 
metodiky je vısledkem sjednocení názorù vırobcù integrovanıch obvodù a jejich 
zákazníkù. Je to kompromis mezi snahou o respektování poadavkù diagnostiky a 
snahou o co nejniší  vırobní náklady. 
Doporuèení JTAG není striktní v tom smyslu, e by pøesnì urèovalo, jak Boundary 
Scan buòky konstruovat. Zamìøuje se spíše na definování rozhraní integrovaného 
obvodu a zpùsob komunikace na tomto rozhraní.</FONT> 
<P> 
<P>&nbsp;<B><I><FONT size=+1>Konstrukce integrovaného obvodu s 
Boundary Scan buòkami</I></B> </FONT>
<P>&nbsp;Architektura 
integrovaného obvodu s Boundary Scan buòkami a øadièem rozhraní TAP je na 
Obr. 5. 
<CENTER><IMG height=323 hspace=9 src="image28.gif" 
width=571></CENTER>
<CENTER><I>Obr. 5 Boundary Scan metoda</I></CENTER>
<P></font> 
<P  align="justify">Boundary Scan metoda vyuívá jednotlivé buòky 
pøi stimulaci a ètení testovacích vektorù na vstupech a vıstupech logického 
jádra. Toto logické jádro mùe obsahovat i vlastní vnitøní diagnostické 
prostøedky. Vnitøní komunikace mezi buòkami, které jsou propojeny do scanovacího 
kanálu je øešena pomocí øadièe rozhraní TAP.</FONT> 
<P>Oznaèení vodièù je:</FONT> 
<P>TDI...Test Data In 
<P>TDO...Test Data Out 
<P>TMS...Test Data Select 
<P>TCK...Test Clock 
<P>RESET... Test Reset 
<P  align="justify">Vodièe TDI a TDO jsou urèeny pro pøesun dat. TMS 
a TCK jsou vodièe pro øízení scanovacího kanálu. RESET není povinnı, ale pouívá 
se pro inicializaci. V reimu testování TAP pøepíná vstupující data na scanovací 
kanál nebo na instrukèní registr. Prostøednictvím instrukèního registru se 
urèuje vıbìr módu. Mód normální èinnosti obvodu F (funkce), mód T (test) zapsání 
a ètení testovacích dat do scanovacího kanálu, a zachycování událostí v reálném 
èase (vzorkování). Instrukèní registr umoòuje pøemostìní pøemostìní všech bunìk 
nebo mùe bıt vyuit pro snímání pøíznakù z logického jádra. Testovací mód 
obsahuje test integrity vnitøních spojù, zkratù, pøerušení a zachytí i obèasné 
poruchy, které mohou bıt zpùsobeny napø. ohøevem obvodu. 
<P  align="justify"> Je-li na desce více VLSI obvodù vybavenıch 
Boundary Scan rozhraním, je mono zøetìzit je sériovì prostøednictvím øídících 
signálù øadièe rozhraní (Obr. 6). Tímto uspoøádáním je provádìna nejen 
diagnostika jednotlivıch obvodù, ale i jejich vzájemného propojení na tištìném 
spoji.</FONT> 
<CENTER><IMG height=232 hspace=9 src="image29b.gif" 
width=540></CENTER>
<CENTER><I><U><FONT size=+1>&nbsp;</FONT></U></I></CENTER>
<CENTER><I>Obr.6 Uspoøádání sériové komunikace na 
desce</FONT></I></CENTER>
<P> 
<P  align="justify">Zpùsob generování øídících a synchronizaèních 
signálù je zøejmı z obr. 7. Obvod má dva vıstupy - shift a load. Signálem 
“load” se vkládá do posuvného registru paralelní informace, signál “shift” 
indikuje sériovı posuv informace. Èinnost obvodu je øízena signálem TMS a má 
tyto tøi fáze(Obr. 8).</FONT> <BR>1) aplikace testu <BR>&nbsp;&nbsp;&nbsp; 
TMS = 0 <FONT face=Symbol>Ş</FONT> load = shift = 0 <BR>2) TMS = 0 <FONT 
face=Symbol>Ş</FONT> load = 1 <BR>3) sestupná hrana TMS <FONT 
face=Symbol>Ş</FONT> klopnı obvod se vynuluje <FONT face=Symbol>Ş</FONT> load = 
0, shift = 1 <BR>&nbsp; 
<CENTER><IMG height=124 hspace=9 src="image30b.gif" 
width=310></CENTER>
<CENTER><I>Obr. 7 Generování øídících 
signálù</FONT></I></CENTER>
<CENTER><IMG height=305 hspace=9 src="image31b.gif" 
width=524></CENTER>
<CENTER><I>Obr. 8 Èasovı diagram øízení posuvného 
registru</FONT></I></CENTER>&nbsp; 
<P><A name="2.4.3 Úprava Boundary Scan buòky"></A><B><I> <FONT size=+1>2.4.3 Úprava Boundary Scan 
buòky</FONT></FONT> </I></B> <BR>&nbsp; 
<P  align="justify">Pro nìkteré aplikace je ádoucí úprava Boundary 
Scan buòky . Na posuvnı registr vytvoøenı propojením jednotlivıch bunìk 
mùe toti navazovat logika, která musí bıt po dobu posuvu informace v posuvném 
registru od této informace procházející posuvnım registrem odblokována. Tento 
poadavek je ještì silnìjší u synchronizaèních vıvodù integrovanıch obvodù. I na 
tyto vıvody musí bıt pøipojena Boundary Scan buòka a musíme zaruèit, aby pøi 
posuvu v posuvném registru nedocházelo ke zmìnám logickıch úrovní na 
tìch to synchronizaèních vıvodech. Zmìna 
obsahu klopného obvodu by pro navazující integrované obvody znamenala generování 
synchronizaèního signálu. V nìkterıch aplikacích se proto doporuèuje doplnit 
Boundary Scan buòku o další klopnı obvod, do nìho se informace pøenese po 
skonèení posuvu (Obr. 9).</FONT> 
<P> 
<CENTER><IMG height=162 hspace=9 src="image32b.gif" 
width=583></CENTER>
<CENTER><I>Obr. 9 Úprava Boundary Scan 
buòky</FONT></I></CENTER>
<CENTER>&nbsp;</CENTER><A name="2.4.4 Boundary Scan"></A><B><I>
<P  align="justify"><FONT 
size=+1>Boundary Scan systémy</FONT></U></I></B> <BR>Systémy s Boundary Scan buòkami jsou øešeny na rùznıch 
úrovních. V dnešní dobì najdeme adaptéry k PC, karty do PC, testery øízené pøes 
sbìrnici IEEE 488.2 a adaptéry k logickım analyzátorùm. Minimálním 
poadavkem pro øízení sériového styku dle standardu IEEE 1149.1 pro Boundary 
Scan metodu je Test Bus Controller. Tento øadiè øídí sériovou komunikaci 
prostøednictvím 4 a 5 vodièového sériového kanálu (TDI, TDO, TMS, TCK, RESET) s 
vnitøním øadièem TAP. Cenovì pøístupná varianta je pouití adaptéru PM 3705 
BST-Explorer spoleènosti JTAG Technologies. Adaptér PM 3705 je spojen se 
sbìrnicí pøes paralelní port a je vybaven pøepínaèem pro eventuelní pøipojení tiskárny. Adaptér obsluhuje dvì paralelnì 
zapojená rozhraní TAP, co umoòuje vyuít jeden kanál pro øízení jednotky 
SCANIO od stejného vırobce. Touto jednotkou lze øídit funkèní testy pøes 
konektory obvodù, u nich nelze aplikovat Boundary Scan metodu. Programové 
vybavení obsahuje základní ovladaèe pro komunikaci.<BR>
Spoleènost JTAG Technologies dále nabízí karty 
do bìnıch PC, pøièem øízení sériového rozhraní je generováno pøes standardní 
sbìrnici PC. Karta umoòuje mìnit hodinovı signál od 937,5 kHz do MHz nebo 
vyuít externí hodiny. Kartu je moné aplikovat pro 6 kanálù TAP .<BR>
Pro nároènìjší aplikace dodává spoleènost JTAG 
Technologies tester PM 3720 Vector Blaster Tento tester je øízen pøes rozhraní 
IEEE-488.2/SCPI. Tester je øiditelnı z jakéhokoliv zaøízení (PC, logickı 
analyzátor, testovací systém) vybaveného stejnım rozhraním. Tester je vybaven 
dostateènì velkou pamìtí testovacích vektorù s moností komprese a dekomprese v 
reálném èase, pracuje v módu virtuální pamìti, èím vzniká “nekoneèná” pamìová 
kapacita s moností nepøetritého generování testovacích vektorù s frekvencí 10 
MHz bez komunikace s øídícím zaøízením. Toto uspoøádání umoòuje synchronizaci 
testování s ostatními èástmi diagnostikovaného systému, testování desek s 
dynamickımi pamìmi apod.Pouitím adaptéru JTAG BA 1149.1 Bus Analyzer 
lze pro HP 1650/16500 øadu logickıch analyzátorù vytvoøit ¨vıkonnı logickı 
analyzátor komunikující ve standardu 1149.1. Adaptér je zaøízení, které se jako 
prùchozí modul pøipojí pøímo ke vstupùm analyzátoru. Analyzátor pak dokáe 
monitorovat všech 5 signálù TAP a zobrazuje jak èasovou tak stavovou analızu 
aktivity TAP.</FONT> <BR>&nbsp; <BR>&nbsp; 

</BODY>
</HTML>
